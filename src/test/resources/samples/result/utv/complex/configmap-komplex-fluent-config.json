{
  "apiVersion": "v1",
  "kind": "ConfigMap",
  "metadata": {
    "labels": {
      "operationScope": "aos-4016",
      "app": "komplex",
      "updatedBy": "hero",
      "updatedAt": "0",
      "lastUpdatedYear": "1970",
      "affiliation": "paas",
      "name": "komplex",
      "app.kubernetes.io/name": "komplex",
      "app.kubernetes.io/component": "backend",
      "app.kubernetes.io/part-of": "test-group",
      "app.openshift.io/runtime": "spring-boot",
      "booberDeployId": "deploy1"
    },
    "name": "komplex-fluent-config",
    "namespace": "paas-utv",
    "ownerReferences": [
      {
        "apiVersion": "skatteetaten.no/v1",
        "kind": "ApplicationDeployment",
        "name": "komplex",
        "uid": "123-123"
      }
    ]
  },
  "data": {
    "fluent-bit.conf": "[SERVICE]\n   Flush        1\n   Daemon       Off\n   Log_Level    info\n   Log_File     /u01/logs/fluentbit\n   Parsers_File /fluent-bit/parser/parsers.conf\n\n[INPUT]\n   Name            tail\n   Path            /u01/logs/*.log\n   Path_Key        source\n   Exclude_Path    *.[1-9].log\n   Read_From_Head  true\n   Tag             application-log4j\n   DB              /u01/logs/application.db\n   Buffer_Max_Size 512k\n   Skip_Long_Lines On\n   Mem_Buf_Limit   20MB\n   Rotate_Wait     10\n   Key             event\n\n[INPUT]\n   Name            tail\n   Path            /u01/logs/*.access\n   Path_Key        source\n   Exclude_Path    *.[1-9].access\n   Read_From_Head  true\n   Tag             access-access_combined\n   DB              /u01/logs/access.db\n   Buffer_Max_Size 512k\n   Skip_Long_Lines On\n   Mem_Buf_Limit   20MB\n   Rotate_Wait     10\n   Key             event\n\n[INPUT]\n   Name             tail\n   Path             /u01/logs/fluentbit\n   Path_Key         source\n   Tag              fluentbit\n   Refresh_Interval 5\n   Read_from_Head   true\n   Key              event\n\n[FILTER]\n   Name             stdout\n   Match            fluentbit\n\n[FILTER]\n   Name rewrite_tag\n   Match *-log4j\n   Rule $event ^{.*}$ application-_json false\n\n[FILTER]\n   Name parser\n   Match *-_json\n   Key_Name event\n   Parser jsonTimeParser\n   Preserve_Key On\n   Reserve_Data On\n\n[FILTER]\n   Name parser\n   Match *-log4j\n   Key_Name event\n   Parser timeParser\n   Preserve_Key On\n   Reserve_Data On\n\n[FILTER]\n   name multiline\n   match *-log4j\n   multiline.key_content event\n   multiline.parser multiline-log4j\n\n[FILTER]\n   Name parser\n   Match *-evalevent_xml\n   Key_Name event\n   Parser evalXmlTimeParser\n   Preserve_Key On\n   Reserve_Data On\n\n[FILTER]\n   Name parser\n   Match *-ats:eval:xml\n   Key_Name event\n   Parser evalXmlTimeParser\n   Preserve_Key On\n   Reserve_Data On\n\n[FILTER]\n   name multiline\n   match *-evalevent_xml\n   multiline.key_content event\n   multiline.parser multiline-eval-xml\n\n[FILTER]\n   name multiline\n   match *-ats:eval:xml\n   multiline.key_content event\n   multiline.parser multiline-eval-xml\n\n[FILTER]\n   Name  modify\n   Match *\n   Add   host ${POD_NAME}\n   Add   environment ${POD_NAMESPACE}\n   Add   applicationVersionUnique 1\n   Add   nodetype openshift\n   Add   applicationNameUnique komplex\n   Add   clusterNameUnique utv\n\n[OUTPUT]\n   Name                       splunk\n   Match                      application-log4j\n   Host                       ${SPLUNK_HOST}\n   Port                       ${SPLUNK_PORT}\n   Splunk_token               ${HEC_TOKEN}\n   TLS                        On\n   TLS.Verify                 Off\n   event_index                test-index\n   event_sourcetype           log4j\n   event_host                 ${POD_NAME}\n   event_source               $source\n   event_field                application $applicationNameUnique\n   event_field                cluster $clusterNameUnique\n   event_field                environment $environment\n   event_field                nodetype $nodetype\n   event_field                version $applicationVersionUnique\n   event_key                  $event\n   net.keepalive_idle_timeout 10\n   Retry_Limit 5\n\n[OUTPUT]\n   Name                       splunk\n   Match                      application-_json\n   Host                       ${SPLUNK_HOST}\n   Port                       ${SPLUNK_PORT}\n   Splunk_token               ${HEC_TOKEN}\n   TLS                        On\n   TLS.Verify                 Off\n   event_index                test-index\n   event_sourcetype           _json\n   event_host                 ${POD_NAME}\n   event_source               $source\n   event_field                application $applicationNameUnique\n   event_field                cluster $clusterNameUnique\n   event_field                environment $environment\n   event_field                nodetype $nodetype\n   event_field                version $applicationVersionUnique\n   event_key                  $event\n   net.keepalive_idle_timeout 10\n   Retry_Limit 5\n\n[OUTPUT]\n   Name                       splunk\n   Match                      access-access_combined\n   Host                       ${SPLUNK_HOST}\n   Port                       ${SPLUNK_PORT}\n   Splunk_token               ${HEC_TOKEN}\n   TLS                        On\n   TLS.Verify                 Off\n   event_index                test-index\n   event_sourcetype           access_combined\n   event_host                 ${POD_NAME}\n   event_source               $source\n   event_field                application $applicationNameUnique\n   event_field                cluster $clusterNameUnique\n   event_field                environment $environment\n   event_field                nodetype $nodetype\n   event_field                version $applicationVersionUnique\n   event_key                  $event\n   net.keepalive_idle_timeout 10\n   Retry_Limit 5\n\n[OUTPUT]\n   Name                       splunk\n   Match                      fluentbit\n   Host                       ${SPLUNK_HOST}\n   Port                       ${SPLUNK_PORT}\n   Splunk_token               ${HEC_TOKEN}\n   TLS                        On\n   TLS.Verify                 Off\n   event_index                test-index\n   event_sourcetype           fluentbit\n   event_host                 ${POD_NAME}\n   event_source               $source\n   event_field                application $applicationNameUnique\n   event_field                cluster $clusterNameUnique\n   event_field                environment $environment\n   event_field                nodetype $nodetype\n   event_field                version $applicationVersionUnique\n   event_key                  $event\n   net.keepalive_idle_timeout 10"
  }
}