{
  "kind": "BuildConfig",
  "apiVersion": "v1",
  "metadata": {
    "name": "${buildName}",
  "labels": {
    #foreach ($label  in $labels.entrySet())
      #if($velocityCount != 1)
        ,
      #end
      "${label.key}": "${label.value}"
    #end
  }
},
"spec": {
"triggers": [
  #if (${build.triggers})
  {
  "type": "ImageChange",
  "imageChange": {
  "from": {
  "kind": "ImageStreamTag",
  "namespace": "openshift",
  "name": "${build.baseName}:${build.baseVersion}"
  }
  }
  },
  {
  "type": "ImageChange",
  "imageChange": {
  }
  }
  #end
],
"strategy": {
"type": "Custom",
"customStrategy": {
"from": {
"kind": "ImageStreamTag",
"namespace": "openshift",
"name": "${build.builderName}:${build.builderVersion}"
},
"env": [
{
"name": "ARTIFACT_ID",
"value": "${build.artifactId}"
},
{
"name": "GROUP_ID",
"value": "${build.groupId}"
},
{
"name": "VERSION",
"value": "${build.version}"
},
{
"name": "DOCKER_BASE_VERSION",
"value": "${build.baseVersion}"
},
{
"name": "DOCKER_BASE_IMAGE",
"value": "aurora/${build.baseName}"
},
{
"name": "PUSH_EXTRA_TAGS",
"value": "${build.extraTags}"
}
],
"exposeDockerSocket": true
}
},
"output": {
"to": {
"kind": "${build.outputKind}",
"name": "${build.outputName}"
}
}
}
}